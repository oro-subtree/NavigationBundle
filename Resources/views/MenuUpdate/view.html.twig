{% extends 'OroUIBundle:actions:view.html.twig' %}
{% import 'OroUIBundle::macros.html.twig' as UI %}

{% oro_title_set({params : {
    "%title%": entity.name
} }) %}

{% block before_content_addition %}{% endblock before_content_addition %}
{% block ownerLink %}{% endblock ownerLink %}
{% block workflowsListContainer %}{% endblock workflowsListContainer %}

{% block navButtons %}
    {% if resource_granted('oro_navigation_menu_update_create') %}
        {{ UI.button({
            'path' : path('oro_navigation_menu_update_create', { 'menu': app.request.get('menu') }),
            'iCss': 'icon-folder-close',
            'aCss': 'btn-primary',
            'label': 'oro.ui.create_entity'|trans({'%entityName%': 'oro.navigation.menuupdate.entity_label'|trans}),
            'title': 'oro.ui.create_entity'|trans({'%entityName%': 'oro.navigation.menuupdate.entity_label'|trans})
        }) }}
    {% endif %}

    {{ parent() }}
{% endblock navButtons %}

{% block pageHeader %}
    {% set breadcrumbs = {
        'entity': entity,
        'indexPath': path('oro_navigation_menu_update_index'),
        'indexLabel': 'oro.navigation.menuupdate.roots_plural_label'|trans,
        'entityTitle': entity.name
    } %}
    {{ parent() }}
{% endblock pageHeader %}

{% block stats %}{% endblock %}

{% block content_data %}
    <div class="left-panel-container">
        <div class="placeholder">
            <div class="scrollable-container">
                <div class="left-panel scrollable-container">
                    <div class="menu-item">
                        {% set treeOptions = {
                            'data' : oro_navigation_menu_item_list(app.request.get('menu')),
                            'menu' : app.request.get('menu'),
                            'updateAllowed' : resource_granted('oro_navigation_menu_update_update'),
                            'onSelectRoute' : 'oro_navigation_menu_update_update',
                            'onRootSelectRoute' : 'oro_navigation_menu_update_view'
                        } %}
                        <div
                                data-page-component-module="oronavigation/js/app/components/tree-manage-component"
                                data-page-component-options="{{ treeOptions|json_encode }}"
                        ></div>
                    </div>
                </div>
                <div class="content">
                    {% if resource_granted('oro_navigation_menu_update_update') %}
                        <div class="text-center">
                            {{ 'oro.navigation.menuupdate.select_existing_or_create_new'|trans }}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock content_data %}
